<template>
  <div>
    <div class="div_col">
      <div id="headerTime">
        <div style="font-size: 1.5rem; display: flex;" class="fontSegoe">
          <svg version="1.0" style="padding: 0; margin-right: 0.75rem;" xmlns="http://www.w3.org/2000/svg"
          width="35pt" height="30pt" viewBox="0 0 512.000000 512.000000"
          preserveAspectRatio="xMidYMid meet">
          <metadata>
          </metadata>
            <g transform="translate(0.000000,512.000000) scale(0.100000,-0.100000)"
            fill="#000000" stroke="none">
            <path d="M698 4960 c-77 -23 -166 -110 -192 -187 -9 -26 -16 -77 -16 -114 l0
            -67 -132 -4 c-106 -3 -142 -8 -179 -25 -66 -30 -114 -76 -149 -145 l-30 -61 0
            -1657 c0 -1849 -6 -1707 71 -1794 22 -25 65 -57 97 -73 l57 -28 1093 -3 1093
            -2 24 24 c33 33 33 79 0 111 l-24 25 -1068 0 c-1192 0 -1111 -5 -1160 69 l-23
            34 0 1338 0 1339 2105 0 2104 0 3 -465 3 -464 22 -23 c27 -27 85 -28 114 -2
            18 17 19 38 19 794 l0 777 -31 61 c-33 66 -89 120 -155 149 -28 12 -77 18
            -171 21 l-133 4 0 67 c0 98 -23 156 -89 222 -67 67 -123 89 -226 89 -170 0
            -288 -120 -302 -305 l-6 -75 -178 0 -179 0 0 68 c0 90 -22 151 -77 212 -65 72
            -110 93 -215 98 -76 4 -92 1 -140 -21 -111 -50 -172 -143 -184 -279 l-7 -78
            -172 0 -173 0 -7 78 c-12 135 -73 228 -183 280 -48 21 -64 24 -140 20 -99 -5
            -145 -24 -205 -85 -62 -61 -80 -105 -85 -205 l-4 -88 -178 0 -177 0 -6 75
            c-10 132 -66 223 -169 274 -53 27 -71 31 -137 30 -42 0 -88 -4 -103 -9z m178
            -172 c63 -44 69 -63 72 -268 3 -177 2 -187 -20 -229 -29 -57 -64 -82 -119 -88
            -55 -5 -114 27 -140 77 -17 30 -19 59 -19 230 0 177 2 198 20 228 43 70 141
            94 206 50z m999 -21 c39 -39 43 -48 50 -109 12 -115 2 -338 -18 -375 -53 -100
            -190 -108 -254 -13 -22 31 -23 42 -23 234 0 183 2 204 20 234 29 46 76 72 134
            72 44 0 53 -4 91 -43z m953 23 c67 -41 72 -62 72 -285 0 -196 -1 -201 -24
            -236 -64 -94 -192 -88 -251 12 -17 30 -20 56 -23 205 -4 203 3 238 58 288 34
            31 47 36 88 36 29 0 59 -8 80 -20z m980 0 c66 -41 72 -62 72 -278 0 -224 -6
            -247 -75 -287 -70 -42 -140 -27 -191 41 l-29 37 -3 189 c-3 176 -2 191 18 233
            12 24 36 53 53 64 42 27 111 27 155 1z m-3316 -447 c3 -74 9 -97 33 -142 96
            -175 332 -213 483 -76 60 54 91 124 99 223 l6 82 178 0 179 0 0 -78 c0 -68 4
            -87 30 -140 57 -113 145 -167 275 -167 92 0 148 21 212 78 56 51 85 116 97
            219 l10 88 172 0 171 0 6 -72 c4 -40 14 -94 22 -120 22 -64 84 -131 153 -165
            48 -24 69 -28 137 -28 130 0 218 54 275 167 26 53 30 72 30 140 l0 78 179 0
            178 0 6 -79 c6 -94 30 -153 86 -214 141 -153 407 -115 497 70 23 46 30 75 33
            141 l3 82 102 0 c120 0 171 -18 204 -72 21 -33 22 -48 22 -247 l0 -211 -2105
            0 -2105 0 0 213 c0 195 2 215 20 245 32 53 87 72 206 72 l102 0 4 -87z"/>
            <path d="M475 3401 c-72 -44 -70 -31 -73 -360 -4 -330 -2 -341 63 -381 30 -19
            51 -20 322 -20 416 0 395 -22 391 402 -4 401 20 378 -393 378 -255 0 -283 -2
            -310 -19z m545 -371 l0 -230 -230 0 -230 0 0 230 0 230 230 0 230 0 0 -230z"/>
            <path d="M1461 3402 c-19 -9 -44 -30 -55 -45 -20 -27 -21 -43 -24 -315 -3
            -321 0 -334 67 -379 33 -23 39 -23 324 -23 277 0 291 1 324 21 62 38 63 46 63
            373 l0 294 -26 32 c-50 59 -56 60 -361 60 -245 0 -282 -2 -312 -18z m539 -372
            l0 -230 -230 0 -230 0 0 230 0 230 230 0 230 0 0 -230z"/>
            <path d="M2439 3399 c-73 -42 -74 -49 -74 -369 0 -255 2 -288 18 -318 33 -60
            66 -72 202 -72 l119 0 -41 -42 c-56 -59 -73 -97 -73 -165 1 -77 24 -125 98
            -197 l60 -59 -40 -65 c-136 -223 -199 -498 -177 -773 16 -197 71 -374 168
            -543 189 -329 526 -565 898 -631 114 -19 334 -19 449 0 272 47 495 164 695
            364 196 196 308 406 360 673 24 124 26 345 3 473 -26 151 -97 335 -179 465
            l-23 37 59 59 c75 74 99 122 99 198 0 76 -22 115 -112 202 -61 59 -82 73 -126
            84 -95 22 -152 0 -253 -97 l-66 -64 -89 45 c-49 25 -135 60 -191 78 l-103 33
            0 61 c0 58 2 62 29 73 38 16 87 68 105 113 23 54 21 201 -3 254 -22 49 -93
            112 -135 119 -17 4 -160 5 -317 3 l-286 -3 -40 -28 c-22 -15 -52 -50 -67 -76
            -23 -43 -26 -60 -26 -140 0 -60 5 -104 16 -129 18 -45 67 -97 105 -113 27 -11
            29 -15 29 -73 l0 -61 -103 -33 c-56 -18 -142 -53 -191 -78 l-89 -45 -43 42
            -44 43 35 28 c20 17 39 45 45 66 7 24 10 134 8 314 -4 390 19 368 -393 368
            -266 0 -282 -2 -316 -21z m551 -369 l0 -230 -235 0 -235 0 0 230 0 230 235 0
            235 0 0 -230z m1102 133 c14 -12 18 -31 18 -76 0 -100 9 -97 -283 -97 -295 0
            -287 -3 -287 93 0 100 -9 97 283 97 219 0 253 -2 269 -17z m-132 -377 l0 -45
            -135 0 -135 0 0 45 0 44 135 0 135 0 0 -44z m6 -211 c90 -8 235 -50 331 -95
            307 -144 545 -426 629 -745 35 -133 44 -357 20 -487 -44 -231 -139 -418 -300
            -586 -224 -234 -501 -353 -823 -353 -319 0 -594 119 -819 353 -277 289 -381
            690 -279 1076 31 116 115 292 184 382 64 84 199 214 280 269 147 100 355 175
            530 191 84 7 122 7 247 -5z m-1063 -16 c12 -6 41 -30 65 -52 l42 -41 -81 -79
            -82 -79 -48 48 c-67 66 -65 85 10 157 33 32 62 57 66 57 3 0 16 -5 28 -11z
            m1938 -46 c74 -71 75 -87 9 -156 l-49 -52 -81 80 -81 80 56 53 c31 28 63 52
            71 52 9 0 42 -25 75 -57z"/>
            <path d="M3675 2419 c-33 -4 -104 -22 -157 -40 -304 -98 -536 -332 -632 -637
            -34 -109 -34 -154 0 -181 56 -44 114 -18 134 61 36 142 106 275 199 380 90
            101 251 198 398 240 112 32 305 32 417 0 151 -43 271 -115 381 -228 115 -118
            192 -269 221 -434 62 -358 -131 -722 -467 -879 -123 -58 -201 -75 -344 -75
            -150 0 -227 18 -360 84 -212 104 -370 290 -430 505 -26 94 -35 112 -61 124
            -36 16 -58 14 -88 -10 -36 -28 -34 -79 8 -201 108 -314 359 -549 681 -635 88
            -23 118 -26 250 -26 129 0 164 4 248 26 345 92 612 359 704 704 23 85 26 118
            26 248 0 131 -3 163 -26 250 -131 488 -597 795 -1102 724z"/>
            <path d="M3777 2078 c-30 -24 -37 -68 -37 -241 l-1 -172 -43 -26 c-27 -17 -55
            -46 -72 -75 -25 -41 -29 -60 -29 -119 0 -59 5 -78 28 -118 77 -130 259 -153
            366 -46 23 23 44 52 47 65 6 23 9 24 115 24 128 0 149 11 149 78 0 64 -23 76
            -149 80 l-107 4 -23 40 c-13 23 -43 53 -72 70 l-49 31 0 188 c0 181 -1 189
            -22 209 -25 23 -76 27 -101 8z m77 -569 c56 -26 53 -105 -4 -129 -80 -33 -135
            90 -56 128 28 14 31 14 60 1z"/>
            <path d="M480 2163 c-19 -10 -45 -33 -57 -52 -23 -33 -23 -39 -23 -325 0 -416
            -25 -391 390 -391 321 0 327 1 369 75 20 36 21 52 21 314 0 307 -3 325 -61
            367 -34 24 -36 24 -319 27 -256 2 -288 1 -320 -15z m540 -378 l0 -235 -230 0
            -230 0 0 235 0 235 230 0 230 0 0 -235z"/>
            <path d="M1462 2163 c-18 -9 -43 -30 -55 -47 -22 -30 -22 -37 -22 -328 0 -284
            1 -298 21 -324 11 -15 33 -37 48 -48 26 -20 40 -21 314 -21 319 0 332 2 373
            68 18 30 19 48 17 334 l-3 301 -25 27 c-48 52 -67 55 -362 55 -231 0 -278 -3
            -306 -17z m538 -378 l0 -235 -230 0 -230 0 0 235 0 235 230 0 230 0 0 -235z"/>
            </g>
          </svg>
          <span style="font-weight: 500">Diferen√ßa de data e hora</span>
        </div>
        <div class="div_row">
          <button class="btn" style="margin: 0 5px" @click="add()">
            <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 14 14">
              <path
                fill-rule="evenodd"
                d="M8,6 L8,3 C8,2.44771525 7.55228475,2 7,2 C6.44771525,2 6,2.44771525 6,3 L6,6 L3,6 C2.44771525,6 2,6.44771525 2,7 C2,7.55228475 2.44771525,8 3,8 L6,8 L6,11 C6,11.5522847 6.44771525,12 7,12 C7.55228475,12 8,11.5522847 8,11 L8,8 L11,8 C11.5522847,8 12,7.55228475 12,7 C12,6.44771525 11.5522847,6 11,6 L8,6 Z"
              />
            </svg>
          </button>
          <button class="btn" @click="remove()">
            <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 14 14">
              <path
                fill-rule="evenodd"
                d="M12,7 C12,7.55228475 11.5522847,8 11,8 L3,8 C2.44771525,8 2,7.55228475 2,7 C2,6.44771525 2.44771525,6 3,6 L11,6 C11.5522847,6 12,6.44771525 12,7 Z"
              />
            </svg>
          </button>
        </div>
      </div>

      <div id="calcTime">
        <div class="divDiff">
          <input id="date_i0" type="datetime-local" step="1" class="form-control" />
          &nbsp;-&nbsp;
          <input id="date_f0" type="datetime-local" step="1" class="form-control" />
        </div>
      </div>
    </div>

    <div class="div_row">
      <div class="div_col">
        <span id="lbl_total" class="fontSegoe">Total:</span>
        <button id="btn_total" class="btn" @click="calc()">Calcular</button>
      </div>
      <div class="div_row" style="width: 100%; justify-content: center">
        <div class="div_col displayTime">
          <span class="lbl_value">{{ anos.toLocaleString('pt-BR', { maximumFractionDigits: 1 }) }}</span>
          <span class="lbl_periodo">anos</span>
          <input id="chk_ano" type="checkbox" checked />
        </div>

        <div class="div_col displayTime">
          <span class="lbl_value">{{ semanas.toLocaleString('pt-BR', { maximumFractionDigits: 1 }) }}</span>
          <span class="lbl_periodo">sem</span>
          <input id="chk_sem" type="checkbox" checked />
        </div>

        <div class="div_col displayTime">
          <span class="lbl_value">{{ dias.toLocaleString('pt-BR', { maximumFractionDigits: 1 }) }}</span>
          <span class="lbl_periodo">dias</span>
          <input id="chk_dia" type="checkbox" checked />
        </div>

        <div class="div_col displayTime">
          <span class="lbl_value">{{ horas.toLocaleString('pt-BR', { maximumFractionDigits: 1 }) }}</span>
          <span class="lbl_periodo">horas</span>
          <input id="chk_h" type="checkbox" checked />
        </div>

        <div class="div_col displayTime">
          <span class="lbl_value">{{ minutos.toLocaleString('pt-BR', { maximumFractionDigits: 1 }) }}</span>
          <span class="lbl_periodo">min</span>
          <input id="chk_min" type="checkbox" checked />
        </div>

        <div class="div_col displayTime">
          <span class="lbl_value">{{ segundos.toLocaleString('pt-BR', { maximumFractionDigits: 1 }) }}</span>
          <span class="lbl_periodo">seg</span>
          <input id="chk_seg" type="checkbox" checked />
        </div>
      </div>
    </div>
  </div>
</template>

<script>

export default {
  name: 'AddHour',
  components: {

  },
  data() {
    return {
      caixas: [],
      count: 0,
      anos: '-',
      semanas: '-',
      dias: '-',
      horas: '-',
      minutos: '-',
      segundos: '-',
      total: 0,
    }
  },
  methods: {
    add() {
      this.count++
      let calcTime = document.getElementById('calcTime')
      calcTime?.insertAdjacentHTML(
        'beforeend',
        '<div id="box' +
          this.count +
          '"><center><div class="plus">+</div></center><div class="divDiff"><input id="date_i' +
          this.count +
          '" type="datetime-local" step="1" class="form-control"/>&nbsp;-&nbsp;<input id="date_f' +
          this.count +
          '" type="datetime-local" step="1" class="form-control"/></div></div>'
      )
      this.caixas.push([document.getElementById('date_i' + this.count), document.getElementById('date_f' + this.count)])
      console.log(this.id)
    },
    remove() {
      if (this.count > 0) {
        const element = document.getElementById('box' + this.count)
        element.remove()
        this.caixas.pop([])
        this.count--
        console.log(this.caixas)
      }
    },
    calc() {
      this.total = 0
      let time1
      let time2
      this.caixas.forEach(element => {
        if (element[0].value != 0 && element[0].value != NaN && element[1].value != 0 && element[1].value != NaN) {
          time1 = new Date(element[0].value)
          time2 = new Date(element[1].value)
          this.total = this.total + (time2 - time1) / 1000
        }
      })
      this.anos = "-"
      this.semanas = "-"
      this.dias = "-"
      this.horas = "-"
      this.minutos = "-"
      this.segundos = "-"

      if (document.getElementById('chk_ano').checked == true) {
        this.total = this.calcYears()
      }
      if (document.getElementById('chk_sem').checked == true) {
        if(document.getElementById('chk_ano').checked == true) { this.anos = Math.trunc(this.anos) }
        this.total = this.calcWeeks()
      }
      if (document.getElementById('chk_dia').checked == true) {
        if(document.getElementById('chk_ano').checked == true) { this.anos = Math.trunc(this.anos) }
        if(document.getElementById('chk_sem').checked == true) { this.semanas = Math.trunc(this.semanas) }
        this.total = this.calcDays()
      }
      if (document.getElementById('chk_h').checked == true) {
        if(document.getElementById('chk_ano').checked == true) { this.anos = Math.trunc(this.anos) }
        if(document.getElementById('chk_sem').checked == true) { this.semanas = Math.trunc(this.semanas) }
        if(document.getElementById('chk_dia').checked == true) { this.dias = Math.trunc(this.dias) }
        this.total = this.calcHours()
      }
      if (document.getElementById('chk_min').checked == true) {
        if(document.getElementById('chk_ano').checked == true) { this.anos = Math.trunc(this.anos) }
        if(document.getElementById('chk_sem').checked == true) { this.semanas = Math.trunc(this.semanas) }
        if(document.getElementById('chk_dia').checked == true) { this.dias = Math.trunc(this.dias) }
        if(document.getElementById('chk_h').checked == true) { this.horas = Math.trunc(this.horas) }
        this.total = this.calcMinutes()
      }
      if (document.getElementById('chk_seg').checked == true) {
        if(document.getElementById('chk_ano').checked == true) { this.anos = Math.trunc(this.anos) }
        if(document.getElementById('chk_sem').checked == true) { this.semanas = Math.trunc(this.semanas) }
        if(document.getElementById('chk_dia').checked == true) { this.dias = Math.trunc(this.dias) }
        if(document.getElementById('chk_h').checked == true) { this.horas = Math.trunc(this.horas) }
        if(document.getElementById('chk_min').checked == true) { this.minutos = Math.trunc(this.minutos) }
        this.segundos = this.total
      }
    },
    calcYears() {
      this.anos = this.total / (60 * 60) / 24 / 365.25
      return this.total - (Math.trunc(this.anos) * 365 * 24 + Math.trunc(this.anos) * 6) * 60 * 60
    },
    calcWeeks() {
      this.semanas = this.total / (60 * 60) / 24 / 7
      return this.total - Math.trunc(this.semanas) * 7 * 24 * 60 * 60
    },
    calcDays() {
      this.dias = this.total / (60 * 60) / 24
      return this.total - Math.trunc(this.dias) * 24 * 60 * 60
    },
    calcHours() {
      this.horas = this.total / (60 * 60)
      return this.total - Math.trunc(this.horas) * 60 * 60
    },
    calcMinutes() {
      this.minutos = this.total / 60
      return this.total - Math.trunc(this.minutos) * 60
    },
    alt() {},
  },
  mounted() {
    this.caixas.push([document.getElementById('date_i0'), document.getElementById('date_f0')]);
  },
  props: {
    id: Number,
  },
}
</script>
<style>

svg {
  padding: 10px;
  fill: #fff;
}
#headerTime {
  display: flex;
  flex-direction: row;
  align-items: center;
  justify-content: space-between;
  padding-bottom: 0.75rem;
}
#headerTime .btn {
  display: flex;
}
#calcTime {
  padding: 0 0 1rem 0;
}
#btn_total {
  padding: 0rem 0.75rem;
  font-family: 'Segoe UI', Tahoma, Geneva, Verdana, sans-serif;
  font-weight: 500;
  font-size: 18px;
}
#lbl_total {
  padding-bottom: 0.5rem;
  font-size: 1rem;
  font-weight: bold;
  display: flex;
  justify-content: flex-end;
}
.lbl_value {
  font-size: 1.5rem;
}
.lbl_periodo {
  font-size: 1rem;
  margin-bottom: 0.25rem;
}
.displayTime {
  font-family: 'Segoe UI', Tahoma, Geneva, Verdana, sans-serif;
  align-items: center;
  padding: 0 10px;
}
.fontSegoe {
  font-family: 'Segoe UI', Tahoma, Geneva, Verdana, sans-serif;
}
.btn {
  min-width: 2.5rem;
  min-height: 2.5rem;
  border: 1px solid #ffffffbb;
  color: #ffffff;
  background-image: linear-gradient(180deg, rgba(46,136,255,1) 0%, rgba(17,107,255,1) 20%, rgba(14,101,242,1) 85%, rgba(18,95,219,1) 100%);
  box-shadow: 0px 0px 2px 0.2px #00000025;
  border-radius: 0.35rem;
  font-family: 'Lucida Sans', 'Lucida Sans Regular', 'Lucida Grande', 'Lucida Sans Unicode', Geneva, Verdana, sans-serif;
  font-weight: bold;
  font-size: 1.25rem;
  cursor: pointer;
}
.btn:hover {
  background-image: linear-gradient(180deg, #2e88fb 0%, #116bff 10%, #0e65f2 90%, #125fdb 100%);
  border: 1px solid #ffffffcc;
}
.btn:active {
  background-image: linear-gradient(180deg, rgba(15,99,153,1) 0%, rgba(16,88,224,1) 15%, rgba(16,88,242,1) 75%, rgba(54,107,255,1) 100%);
  border: 1px solid #ffffffcc;
  color: #d7e6f3;
  box-shadow: unset;
}
.btn:active svg {
  fill: #d7e6f3;
}
.plus {
  font-family: 'Lucida Sans', 'Lucida Sans Regular', 'Lucida Grande', 'Lucida Sans Unicode', Geneva, Verdana, sans-serif;
  font-weight: bold;
}
.form-control {
  font-family: 'Segoe UI', Tahoma, Geneva, Verdana, sans-serif;
  padding: 0.375rem 0.75rem;
  font-size: 1rem;
  color: #495057;
  background-color: #fff;
  background-clip: padding-box;
  border: 1px solid #ced4da;
  border-radius: 0.25rem;
  transition: border-color 0.15s ease-in-out, box-shadow 0.15s ease-in-out;
}
.form-control:focus {
  outline: 0;
  border-color: #6db8cc !important;
  box-shadow: inset 0 1px 1px rgb(0 0 0 / 8%), 0 0 8px rgb(155 225 255 / 60%) !important;
}
.divDiff {
  display: flex;
  align-items: center;
  justify-content: center;
  flex-wrap: nowrap;
  padding: 0.25rem;
  background-color: #a551;
  border-radius: 0.5rem;
  border: 1px solid #ced4da;
  box-shadow: 0 0 3px 1px rgba(0, 0, 0, 0.25);
}
</style>

